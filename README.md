# SocialNetwork

###### _New Repository for Social Network project_

Данный проект представляет собой реализацию социальной сети, в которой вы можете выкладывать свои посты,
заводить друзей и общаться с ними. Также у Вас есть собственная страница, которую вы можете редактировать и заполнять как хотите.

Сейчас существует много различных социальных сетей, однако плюсом этого проекта является то, что он реализует лишь базовый функционал социальной сети,
а значит с хорошей командой его можно развивать и добавлять фичи, которых ни у кого нет.

#### _Описание функционала_
У вас есть 4 вкладки: Моя страница, Новости, Диалоги, Друзья. При желании можно сменить светлую тему на темную Также вы можете выйти из своего аккаунта, авторизироваться или зарегистрироваться на сайте.
**Внимание!!!** При регистрации, вам надо указать почту, к которой у вас есть доступ, тк вам потребуется подтверждение указанной почты для завершения регистрации.
Подтверждение по почте также потребуется при смене почты (на домашней странице) или при смене пароля (на странице авторизации).
За пароли можете не переживать, они хранятся в базе данных в зашифрованном виде, так что никто не может узнать, какой вы ввели пароль.

###### _Моя страница_
В этой вкладке представлена вся информация о пользователе: его аватар, никнейм, статус и другие параметры, а также краткий список его друзей и подписчиков
(по соответствующим кнопкам вы можете просмотреть список всех друзей или подписчиков пользователя).

Ниже на странице будут располагаться все посты, которые выкладывал данный пользователь. Если Вы просматриваете собственную страницу,
то у Вас будет возможность редактировать информацию о себе, изменять вашу почту, а также добавлять/удалять/редактировать ваши посты.

###### _Новости_
Здесь будут располагаться страницы со всеми постами всех пользователей*. Вы можете просматривать и оценивать эти посты.
При необходимости, вы можете сортировать посты по-какому либо критерию и фильтровать их по тегам. Фильтрация происходит по принципу "У поста есть хотя бы один тег из указанных".
Чтобы сбросить фильтрацию, нажмите на кнопку "По умолчанию"
* По умолчанию на каждой странице грузится 6 постов (для новостей) и 5 пользователе (для страницы "Добавить друга"). Эти параметры, при необходимости,
  Вы можете изменить в файле app/config.py (параметры: POSTS_PER_PAGE и USERS_PER_PAGE)

###### _Диалоги_
На этой странице будут отображаться все ваши диалоги. У них будут отображаться последние сообщения (также их автор и время отправления сообщения),
а также статус сообщения (Прочитано/Не прочитано, если последнее сообщение от вас) или количество непрочитанных сообщений (если последнее сообщение от вашего собеседника).
Вы можете перейти на страницу вашего собеседника или к диалогу с ним. В диалоге сверху-вниз будут идти все сообщения в этом диалоге, разделяясь классами на авторов сообщения.
Также у сообщений пишется их статус и время отправления. Чтобы опуститься в самый низ диалога (к последним сообщениям) нажмите на закругленную синюю кнопку со стрелкой вниз.
Серая кнопка со стрелкой влево вернет вас к странице диалогов. Чтобы отправить сообщение, заполните поле для ввода и нажмите на кнопку рядом с ней.

##### _Примечание_
Все сообщения отправляются без перезагрузки страницы и динамически отображаются как у вас, так и у вашего собеседника. Таким образом вы можете оба сидеть в диалоге друг с другом
и видеть каждое отправленное сообщение без необходимости обновлять для этого страницу. Для того чтобы в этом убедится, вы можете авторизироваться под другим аккаунтом
**!с другого браузера!** (список аккаунтов приведен ниже). Обновление статуса сообщений (Не прочитано -> Прочитано) также происходит без перезагрузки страницы.
Такой функционал был достигнут с помощью обработки уведомлений (модель Notifications) в js-функциях.

###### _Друзья_
В этом наборе вкладок вы можете посетить страницу со списком всех друзей пользователя, всех подписчиков, а также всех пользователей, которым был отправлен запрос дружбы.
На вкладке "Добавить друга" приведены страницы всех зарегистрированных пользователей, чтобы Вы могли искать новых друзей.
Вы также можете добавлять/удалять запросы дружбы и добавлять/удалять друзей, при этом карточки будут обновляться без перезагрузки страницы.
Уведомление около вкладки "Друзья" показывает количество входящих запросов дружбы, на которые вы не ответили (можно принять или оставить в подписчиках)
Все уведомления также обновляются динамически.

##### _Примечание_
Возможна ситуация с устаревшим запросом дружбы. Например вы перешли на страницу ваших подписчиков и хотите кого-то добавить в друзья,
однако этот пользователь в этот же момент времени отменил запрос дружбы к вам. Дабы избежать конфликтов и противоречащих записей в базе данных,
в этом случае вам (если первым статус изменил другой пользователь) или другому пользователю (если первым изменили статус вы) будет отправлено всплывающее уведомление,
а карточка пользователя заменится на актуальную на данный момент времени.

### _Заключение_
В данном проекте поддерживается асинхронная отправка сообщений с помощью FlaskMail.
Также все временные параметры хранятся в базе данных в формате UTC, и преобразуются к местному времени на стороне клиента при помощи
Flask-Moment и MomentJS. Для того, чтобы клиент получал информацию о новых уведомлениях для него используется технология WebSocket.
Также, когда сервер находится в режиме production, все ошибки логгируются и отправляются на почты админам,
однако тк необходимо сохранять анонимность (и в целях сохранения конфиденциальных данных) из файлов app/config.py и .env удалены упоминания об админах и их личных данных.
Если вы хотите проверить работу этого функционала, то укажите свою google почту (с ней точно работает, с другими не уверен) в массиве ADMINS в файле app/config.py,
а также логин и **действительный пароль** от этой почты в строках MAIL_USERNAME и MAIL_PASSWORD в файле .env. Если при работе не происходит динамического обновления данных, (не появляются сообщения и тп),
это означает что в вашем браузере не получилось отправить WebSocket сообщения (из-за политики CORS). В этом случае вы можете перезагружать страницы, чтобы видеть изменения.
Правильная работа продемонстрирована на видео (при правильном подключении в консоли сайта появится строка "connected!")

Также если вы не хотите по каким либо причинам создавать собственный аккаунт, то можете выбрать один из фиктивно созданных (почты нереальные, так что для проверки
некоторого функционала все равно придется изменить почту на ту, к которой у вас есть доступ):

Никнейм            - Логин            - Пароль

IvanBrekman        - anonim@mail.ru   - 1234
Новый пользователь - test@mail.ru1    - 1234
Мишка              - anonim2@mail.ru  - 1234
hamsterfrr         - anonim3@mail.ru  - 1234
Тест               - test2@mail.ru    - 1234
Тест2              - test3@mail.ru    - 1234
olesya             - test123@mail.ru  - 1234
JUSTrain           - test1@mail.ru    - 1234
Vio_let_ta         - anonim4@mail.ru  - 1234

** Для более удобного просмотра таблицы пользователей откройте файл README.md через PyCharm
